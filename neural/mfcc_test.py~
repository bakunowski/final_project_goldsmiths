import json
import numpy as np
import tensorflow as tf
from tensorflow.keras import layers
import pandas as pd

print(tf.VERSION)
print(tf.keras.__version__)

with open(
        '/Users/bakunowski/Documents/goldsmiths/2018_19/dissertation/project/neural/test.json'
) as f:
    json_data = json.load(f)

mfcc = np.array(json_data["mfcc"])

with open(
        '/Users/bakunowski/Documents/goldsmiths/2018_19/dissertation/project/neural/parameters.json'
) as f:
    d2 = json.load(f)

duration = np.array(d2["parameters"]["duration"]).reshape(6299, 1)
numberOfGrains = np.array(d2["parameters"]["numberOfGrains"]).reshape(6299, 1)
pitch = np.array(d2["parameters"]["pitch"]).reshape(6299, 1)
position = np.array(d2["parameters"]["position"]).reshape(6299, 1)
spread = np.array(d2["parameters"]["spread"]).reshape(6299, 1)

parameters = np.concatenate(
    (duration, numberOfGrains, pitch, position, spread), axis=1)

mfcc_shuffled = np.random.shuffle(mfcc)
parameters_shuffled = np.random.shuffle(parameters)
numberOfGrains_shuffled = np.random.shuffle(numberOfGrains)

np.random.shuffle(mfcc)
np.random.shuffle(numberOfGrains)

X_train = mfcc[0:5000]

y_train = numberOfGrains[0:5000]

X_test = mfcc[5001:6299]
y_test = numberOfGrains[5001:6299]

print(mfcc[0][0])
print("Train dimensions", X_train.shape)
print("Train labels dimensions", y_train.shape)
